/* ==========================================================================
   ACCESSIBILITY COMPONENTS
   Skip links, focus management, and ARIA enhancements
   ========================================================================== */

/* ==========================================================================
   SKIP LINKS
   ========================================================================== */

.skip-links {
  position: absolute;
  top: 0;
  left: 0;
  z-index: var(--z-index-maximum);
  width: 100%;
}

.skip-link {
  position: absolute;
  top: -100px;
  left: var(--space-4);
  background: var(--color-accent);
  color: var(--color-black);
  padding: var(--space-3) var(--space-4);
  text-decoration: none;
  font-family: var(--font-mono);
  font-weight: var(--font-weight-bold);
  font-size: var(--font-size-body-sm);
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-wide);
  border: var(--border-width-thick) solid var(--color-black);
  box-shadow: var(--shadow-md);
  transition: top var(--transition-fast);
  z-index: var(--z-index-maximum);
}

.skip-link:focus {
  top: var(--space-4);
  outline: var(--focus-ring-width) solid var(--color-black);
  outline-offset: var(--focus-ring-offset);
}

.skip-link:hover {
  background: var(--color-white);
  color: var(--color-black);
  box-shadow: var(--shadow-accent-md);
}

/* ==========================================================================
   FOCUS MANAGEMENT
   ========================================================================== */

/* Enhanced focus indicators */
.focus-visible,
*:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--border-radius-sm);
}

/* Focus trap for modals and forms */
.focus-trap {
  position: relative;
}

.focus-trap::before,
.focus-trap::after {
  content: "";
  position: absolute;
  width: 1px;
  height: 1px;
  opacity: 0;
  pointer-events: none;
}

/* High contrast focus indicators */
@media (prefers-contrast: high) {
  .focus-visible,
  *:focus-visible {
    outline-width: 4px;
    outline-color: var(--color-white);
    background-color: var(--color-black);
    box-shadow: 0 0 0 2px var(--color-black), 0 0 0 6px var(--color-white);
  }
}

/* ==========================================================================
   SCREEN READER UTILITIES
   ========================================================================== */

/* Screen reader only content */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Screen reader only content that becomes visible on focus */
.sr-only-focusable:focus {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: var(--space-2) var(--space-4) !important;
  margin: 0 !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
  background: var(--color-accent) !important;
  color: var(--color-black) !important;
  border: var(--border-width-thick) solid var(--color-black) !important;
  font-family: var(--font-mono) !important;
  font-weight: var(--font-weight-bold) !important;
  text-transform: uppercase !important;
}

/* ==========================================================================
   ARIA LIVE REGIONS
   ========================================================================== */

.live-region {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

.live-region[aria-live="polite"] {
  /* Polite announcements */
}

.live-region[aria-live="assertive"] {
  /* Assertive announcements */
}

/* ==========================================================================
   KEYBOARD NAVIGATION ENHANCEMENTS
   ========================================================================== */

/* Keyboard navigation indicators */
.keyboard-nav-active *:focus {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* Hide focus indicators when using mouse */
.mouse-nav-active *:focus {
  outline: none;
}

/* Tab order helpers */
.tab-order-1 {
  order: 1;
}
.tab-order-2 {
  order: 2;
}
.tab-order-3 {
  order: 3;
}
.tab-order-4 {
  order: 4;
}
.tab-order-5 {
  order: 5;
}

/* ==========================================================================
   TOUCH ACCESSIBILITY
   ========================================================================== */

/* Minimum touch target sizes */
@media (pointer: coarse) {
  .touch-target,
  button,
  .btn,
  a[role="button"],
  input,
  textarea,
  select,
  [tabindex]:not([tabindex="-1"]) {
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
  }

  /* Increase spacing between touch targets */
  .touch-target + .touch-target,
  .btn + .btn,
  button + button {
    margin-left: var(--space-2);
  }
}

/* ==========================================================================
   MOTION ACCESSIBILITY
   ========================================================================== */

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Keep essential animations but make them instant */
  .loading-spinner,
  .progress-indicator {
    animation: none !important;
  }

  /* Show final state immediately */
  .animate-on-scroll {
    opacity: 1 !important;
    transform: none !important;
  }
}

/* ==========================================================================
   COLOR AND CONTRAST ACCESSIBILITY
   ========================================================================== */

/* High contrast mode adjustments */
@media (prefers-contrast: high) {
  .btn,
  .card,
  .input {
    border-width: var(--border-width-heavy);
  }

  .text-muted {
    color: var(--color-white);
  }

  .bg-subtle {
    background-color: var(--color-black);
    border: var(--border-width-thick) solid var(--color-white);
  }
}

/* ==========================================================================
   ARIA LABELS AND DESCRIPTIONS
   ========================================================================== */

/* Visual indicators for ARIA states */
[aria-expanded="true"]::after {
  content: " (expanded)";
  position: absolute;
  left: -10000px;
}

[aria-expanded="false"]::after {
  content: " (collapsed)";
  position: absolute;
  left: -10000px;
}

[aria-selected="true"] {
  background-color: var(--color-accent);
  color: var(--color-black);
}

[aria-current="page"] {
  font-weight: var(--font-weight-bold);
  text-decoration: underline;
  text-decoration-color: var(--color-accent);
  text-decoration-thickness: var(--border-width-normal);
}

/* ==========================================================================
   ERROR AND STATUS MESSAGING
   ========================================================================== */

.error-message {
  color: var(--color-danger);
  font-family: var(--font-mono);
  font-size: var(--font-size-body-sm);
  font-weight: var(--font-weight-bold);
  margin-top: var(--space-1);
}

.success-message {
  color: var(--color-success);
  font-family: var(--font-mono);
  font-size: var(--font-size-body-sm);
  font-weight: var(--font-weight-bold);
  margin-top: var(--space-1);
}

.status-message {
  padding: var(--space-3) var(--space-4);
  border: var(--border-width-thick) solid;
  font-family: var(--font-mono);
  font-weight: var(--font-weight-bold);
  text-transform: uppercase;
  letter-spacing: var(--letter-spacing-wide);
}

.status-message.error {
  background: var(--color-danger);
  color: var(--color-white);
  border-color: var(--color-white);
}

.status-message.success {
  background: var(--color-success);
  color: var(--color-black);
  border-color: var(--color-black);
}

.status-message.warning {
  background: var(--color-accent);
  color: var(--color-black);
  border-color: var(--color-black);
}
